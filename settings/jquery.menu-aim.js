!function(x){x.fn.menuAim=function(e){return this.each(function(){(function(e){var f=x(this),a=null,s=[],h=null,n=null,m=x.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:x.noop,exit:x.noop,activate:x.noop,deactivate:x.noop,exitMenu:x.noop},e),i=function(e){e!=a&&(a&&m.deactivate(a),m.activate(e),a=e)},o=function(e){var t=u();t?n=setTimeout(function(){o(e)},t):i(e)},u=function(){if(!a||!x(a).is(m.submenuSelector))return 0;var e=f.offset(),t={x:e.left,y:e.top-m.tolerance},n={x:e.left+f.outerWidth(),y:t.y},i={x:e.left,y:e.top+f.outerHeight()+m.tolerance},o={x:e.left+f.outerWidth(),y:i.y},u=s[s.length-1],r=s[0];if(!u)return 0;if((r=r||u).x<e.left||r.x>o.x||r.y<e.top||r.y>o.y)return 0;if(h&&u.x==h.x&&u.y==h.y)return 0;function c(e,t){return(t.y-e.y)/(t.x-e.x)}var l=n,e=o;"left"==m.submenuDirection?(l=i,e=t):"below"==m.submenuDirection?(l=o,e=i):"above"==m.submenuDirection&&(l=t,e=n);t=c(u,l),n=c(u,e),l=c(r,l),e=c(r,e);return t<l&&e<n?(h=u,300):(h=null,0)};f.mouseleave(function(){n&&clearTimeout(n),m.exitMenu(this)&&(a&&m.deactivate(a),a=null)}).find(m.rowSelector).mouseenter(function(){n&&clearTimeout(n),m.enter(this),o(this)}).mouseleave(function(){m.exit(this)}).click(function(){i(this)}),x(document).mousemove(function(e){s.push({x:e.pageX,y:e.pageY}),3<s.length&&s.shift()})}).call(this,e)}),this}}(jQuery);