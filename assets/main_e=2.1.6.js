$(document).ready(function(){function t(){cwidth=$(window).width(),cwidth<=575.98?(width=270,height=180):(width=760,height=480)}$("body").on("click",".hg",function(){swal({title:"Devam etmek istediğinize emin misin?",buttons:["İptal","Tamam"]}).then(t=>{if(t){if(value=$(".newsph").croppie("get").points,$("input[name=img]").val(value),".zip"==$("input[name=KapakResmi]").val().substr(-4))return $("input[name=KapakResmi]").val(""),swal({title:"JPG, JPEG veya PNG dosyası yükleyiniz",icon:"warning",buttons:[!1,"Tamam"]}),!1;var i=$(".hs")[0],a=new FormData(i);$.ajax({type:"post",url:"haberekles",dataType:"json",enctype:"multipart/form-data",processData:!1,contentType:!1,cache:!1,data:a,beforeSend:function(){$(".hgb").html('<button class="call-to-action"><div><div>Yükleniyor..</div></div></button>')},success:function(t){"null"==t.statu?($(".hgb").html('<button class="call-to-action hg" type="submit" ><div><div>Devam Et</div></div></button>'),swal({title:"Lütfen zorunlu alanları doldurunuz.",icon:"warning",buttons:[!1,"Tamam"]})):"long"==t.statu?($(".hgb").html('<button class="call-to-action hg" type="submit" ><div><div>Devam Et</div></div></button>'),swal({title:"Haber başlığı 100 karakterden uzun olmamalı",icon:"warning",buttons:[!1,"Tamam"]})):"image"==t.statu?($(".hgb").html('<button class="call-to-action hg" type="submit" ><div><div>Devam Et</div></div></button>'),$("input[name=KapakResmi]").val(""),swal({title:"Resim yüklenemedi.Lütfen başka bir resim yükleyiniz.",icon:"warning",buttons:[!1,"Tamam"]})):"imageType"==t.statu?($(".hgb").html('<button class="call-to-action hg" type="submit" ><div><div>Devam Et</div></div></button>'),$("input[name=KapakResmi]").val(""),swal({title:"JPG, JPEG veya PNG dosyası yükleyiniz.",icon:"warning",buttons:[!1,"Tamam"]})):"size"==t.statu?($(".hgb").html('<button class="call-to-action hg" type="submit" ><div><div>Devam Et</div></div></button>'),$(".hs").trigger("reset"),swal({title:"Kapak resmi 2MB'den yüksek olamaz",icon:"warning",buttons:[!1,"Tamam"]})):"newsError"==t.statu?($(".hgb").html('<button class="call-to-action hg" type="submit" ><div><div>Devam Et</div></div></button>'),swal({title:"Haber yüklenemedi. Lütfen tekrar deneyiniz.",icon:"error",buttons:[!1,"Tamam"]}),$(".hs").trigger("reset")):"success"==t.statu&&""!=t.url&&""!=t.username&&""!=t.news?setTimeout(function(){window.location=t.url+t.username+"/"+t.news},500):"block"==t.statu&&""!=t.date&&($(".hgb").html('<button class="call-to-action hg" type="submit" ><div><div>Devam Et</div></div></button>'),swal({title:"İşlem Engellendi",text:t.date+" tarihine kadar bu işlemi gerçekleştiremezsiniz. Lütfen daha sonra tekrar dene. Topluluğumuzu korumak için bazı içerikleri ve işlemleri kısıtlıyoruz. Hata yaptığımızı düşünüyorsan bize bildir. ",icon:"error",buttons:[!1,"Tamam"]}))}})}})}),t(),$(window).resize(function(){t()}),$(function(){$(".newsph").css({display:"none"}),$uploadCrop=$(".newsph").croppie({enableExif:!0,viewport:{width:width,height:height},boundary:{width:width,height:height}}),$("#upload").on("change",function(){$(".newsph").css({display:"block"});var t=document.getElementById("upload");if(t.files&&t.files[0]){var i=new FileReader;i.onload=function(){var t=i.result;$uploadCrop.croppie("bind",{url:t})},i.readAsDataURL(t.files[0])}})}),$("body").on("click",".button-wrap",function(){i=$(this).attr("data"),j=$(this).attr("data-id"),ui=$(this).attr("data-type"),swal({title:"Haber durumunu değiştirmek istediğine emin misin?",buttons:["İptal","Tamam"]}).then(t=>{t&&$.ajax({type:"post",url:"haberd",dataType:"json",data:{hiy:i,j:j,ui:ui},beforeSend:function(){$("#h"+i).removeClass("button-wrap")},success:function(t){"success1"==t.statu?($("#h"+i).addClass("button-wrap"),$("#h"+i).removeClass("button-active"),swal({title:"Haber Yayından Kaldırıldı ",icon:"success",buttons:[!1,"Tamam"]})):"success2"==t.statu?($("#h"+i).addClass("button-wrap"),$("#h"+i).addClass("button-active"),swal({title:"Haber Yayınlandı",icon:"success",buttons:[!1,"Tamam"]})):swal({title:"Haber Durumu Değiştirilemedi",icon:"error",buttons:[!1,"Tamam"]})}})})}),$("body").on("click",".hsb",function(){i=$(this).attr("data"),j=$(this).attr("data-id"),ui=$(this).attr("data-type"),swal({title:"Haberi Silmek istediğine emin misin?",buttons:["İptal","Tamam"]}).then(t=>{t&&$.ajax({type:"post",url:"habers",dataType:"json",data:{hs:i,j:j,ui:ui},beforeSend:function(){$("#eh"+i).removeClass("hsb")},success:function(t){1==t.statu?($("#eh"+i).addClass("hsb"),$("#he"+i).remove(),swal({title:"Haber Silindi",icon:"success",buttons:[!1,"Tamam"]})):swal({title:"Haber Silinemedi",icon:"error",buttons:[!1,"Tamam"]})}})})}),$("body").on("click",".his",function(){i=$(this).attr("data"),j=$(this).attr("data-id"),swal({title:"Haber içeriğini silmek istediğine emin misin?",buttons:["İptal","Tamam"]}).then(t=>{t&&$.ajax({type:"post",url:"habericeriksil",dataType:"json",data:{his:i,j:j},success:function(t){1==t.statu?($("#i"+i).remove(),swal({title:"İçerik Silindi",icon:"success",buttons:[!1,"Tamam"]})):swal({title:"İçerik Silinemedi",icon:"error",buttons:[!1,"Tamam"]})}})})})});