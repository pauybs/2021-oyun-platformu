$(document).ready(function(){function t(){cwidth=$(window).width(),cwidth<=575.98?(width=230,height=180):(width=760,height=480)}t(),$(window).resize(function(){t()}),$(function(){$(".icrkph").css({display:"none"}),$uploadCrop=$(".icrkph").croppie({enableExif:!0,viewport:{width:width,height:height},boundary:{width:width,height:height}}),$("#upload").on("change",function(){$(".icrkph").css({display:"block"});var t=document.getElementById("upload");if(t.files&&t.files[0]){var i=new FileReader;i.onload=function(){var t=i.result;$uploadCrop.croppie("bind",{url:t})},i.readAsDataURL(t.files[0])}})}),$(function(){$(".newsph").css({display:"none"}),$uploadCrop2=$(".newsph").croppie({enableExif:!0,viewport:{width:width,height:height},boundary:{width:width,height:height}}),$("#upload2").on("change",function(){$(".newsph").css({display:"block"});var t=document.getElementById("upload2");if(t.files&&t.files[0]){var i=new FileReader;i.onload=function(){var t=i.result;$uploadCrop2.croppie("bind",{url:t})},i.readAsDataURL(t.files[0])}})}),$("body").on("click",".hrg",function(){swal({title:"Kapak resmini değiştirmek istediğine emin misin?",buttons:["İptal","Tamam"]}).then(t=>{if(t){if(value=$(".newsph").croppie("get").points,$("input[name=img]").val(value),".zip"==$("input[name=KapakResmi]").val().substr(-4))return $("input[name=KapakResmi]").val(""),swal({title:"JPG, JPEG veya PNG dosyası yükleyiniz",icon:"warning",buttons:[!1,"Tamam"]}),!1;var i=$(".hrgf")[0],a=new FormData(i);$.ajax({type:"post",url:"haberkapak",dataType:"json",enctype:"multipart/form-data",processData:!1,contentType:!1,cache:!1,data:a,beforeSend:function(){$(".hkrb").html('<button class="call-to-action " ><div><div>Yükleniyor..</div></div></button>')},success:function(t){"error"==t.statu?setTimeout(function(){window.location="index.php"},500):"imageError"==t.statu?($(".hkrb").html('<button class="call-to-action hrg" type="submit" ><div><div>Değiştir</div></div></button>'),$("input[name=KapakResmi]").val(""),swal({title:"Resim yüklenemedi. Lütfen başka resim yükleyiniz.",icon:"error",buttons:[!1,"Tamam"]})):"type"==t.statu?($(".hkrb").html('<button class="call-to-action hrg" type="submit" ><div><div>Değiştir</div></div></button>'),$("input[name=KapakResmi]").val(""),swal({title:"JPG, JPEG veya PNG dosyası yükleyiniz",icon:"warning",buttons:[!1,"Tamam"]})):"size"==t.statu?($(".hkrb").html('<button class="call-to-action hrg" type="submit" ><div><div>Değiştir</div></div></button>'),$("input[name=KapakResmi]").val(""),swal({title:"Resim 2MB'dan yüksek olamaz.",icon:"warning",buttons:[!1,"Tamam"]})):"success"==t.statu&&($(".hkrb").html('<button class="call-to-action hrg" type="submit" ><div><div>Değiştir</div></div></button>'),swal({title:"Kapak resmi kaydedildi.",icon:"success",buttons:[!1,"Tamam"]}),$("input[name=KapakResmi]").val(""),$(".hrgs").fadeOut(2e3),$(".newsph").css({display:"none"}))}})}})}),$("body").on("click",".his",function(){i=$(this).attr("data"),j=$(this).attr("data-id"),swal({title:"Haber içeriğini silmek istediğine emin misin?",buttons:["İptal","Tamam"]}).then(t=>{t&&$.ajax({type:"post",url:"habericeriksil",dataType:"json",data:{his:i,j:j},success:function(t){1==t.statu?($("#i"+i).remove(),swal({title:"İçerik Silindi",icon:"success",buttons:[!1,"Tamam"]})):swal({title:"İçerik Silinemedi",icon:"error",buttons:[!1,"Tamam"]})}})})}),$("body").on("click",".hbd",function(){swal({title:"Bilgileri kaydetmek istediğine emin misin?",buttons:["İptal","Tamam"]}).then(t=>{t&&$.ajax({type:"post",url:"haberbilgi",dataType:"json",data:$(".hb").serialize(),success:function(t){$(".hbg").fadeIn(),"error"==t.statu?setTimeout(function(){window.location="index.php"},500):"null"==t.statu?swal({title:"Lütfen zorunlu alanları doldurunuz.",icon:"warning",buttons:[!1,"Tamam"]}):"long"==t.statu?swal({title:"Haber başlığı 100 karakterden uzun olmamalı ",icon:"warning",buttons:[!1,"Tamam"]}):"success"==t.statu&&(swal({title:"Bilgiler kaydedildi",icon:"success",buttons:[!1,"Tamam"]}),$(".hbg").fadeOut(3e3))}})})}),$("body").on("click",".hig",function(){swal({title:"İçeriği yüklemek istediğine emin misin?",buttons:["İptal","Tamam"]}).then(t=>{if(t){value=$(".icrkph").croppie("get").points,$("input[name=img]").val(value);var i=CKEDITOR.instances.ckeditor1.getData();if($("textarea[name=Yazi]").val(i),".zip"==$("input[name=IcerikResmi]").val().substr(-4))return $(".hib").fadeOut(),$(".hia").html(" "),$(".hrs").html(" "),$(".hss").html(" "),$("input[name=IcerikResmi]").val(""),swal({title:"JPG, JPEG veya PNG dosyası yükleyiniz",icon:"warning",buttons:[!1,"Tamam"]}),!1;var a=$(".hie")[0],e=new FormData(a);$.ajax({type:"post",url:"icerikekle",dataType:"json",enctype:"multipart/form-data",processData:!1,contentType:!1,cache:!1,data:e,beforeSend:function(){$(".hiyb").html('<button class="call-to-action " ><div><div>Yükleniyor..</div></div></button>')},success:function(t){$(".hiyb").html('<button class="call-to-action hig" type="submit" ><div><div>İçerik Yükle</div></div></button>'),"error"==t.statu?setTimeout(function(){window.location="index.php"},500):"null"==t.statu?swal({title:"Lütfen zorunlu alanları doldurunuz.",icon:"warning",buttons:[!1,"Tamam"]}):"long"==t.statu?swal({title:"İçerik başlığı 100 karakterden uzun olmamalı",icon:"warning",buttons:[!1,"Tamam"]}):"video"==t.statu?swal({title:"Geçersiz  Video Id'si",text:"Lütfen doğru video id'si girdiğinizden emin olun.",icon:"warning",buttons:[!1,"Tamam"]}):"image"==t.statu?($(".hib").fadeOut(),$(".hia").html(" "),$(".hrs").html(" "),$(".hss").html(" "),$("input[name=IcerikResmi]").val(""),swal({title:"Resim yüklenemedi. Lütfen başka bir resim yükleyiniz",icon:"warning",buttons:[!1,"Tamam"]})):"size"==t.statu?($(".hib").fadeOut(),$(".hia").html(" "),$(".hrs").html(" "),$(".hss").html(" "),$("input[name=IcerikResmi]").val(""),swal({title:"Resim 2 MB'dan yüksek olamaz.",icon:"warning",buttons:[!1,"Tamam"]})):"type"==t.statu?($(".hib").fadeOut(),$(".hia").html(" "),$(".hrs").html(" "),$(".hss").html(" "),$("input[name=IcerikResmi]").val(""),swal({title:"JPG, JPEG veya PNG dosyası yükleyiniz",icon:"warning",buttons:[!1,"Tamam"]})):0==t.statu?($(".hie").trigger("reset"),$(".hib").fadeOut(),$(".hia").html(" "),$(".hrs").html(" "),swal({title:"İçerik yüklenemedi.Lütfen daha sonra tekrar deneyiniz",icon:"error",buttons:[!1,"Tamam"]})):"contentnull"==t.statu?swal({title:"Zorunlu Alanları Doldurunuz",text:"İçerik yazınızı boş bırakmayınız",icon:"warning",buttons:[!1,"Tamam"]}):"imagesuccess"==t.statu&&""!=t.contentid&&""!=t.image&&""!=t.username&&""!=t.newsid&&""!=t.title&&""!=t.tkn?($(".iy").fadeOut(),$(".hib").fadeOut(),$(".hia").html(" "),$(".hrs").html(" "),$(".hss").html(" "),$(".hie").trigger("reset"),swal({title:"İçerik Eklendi",icon:"success",buttons:[!1,"Tamam"]}),$(".ghi").append('<div class="col-12   mb-4  " id="i'+t.contentid+'" ><div class="row  justify-content-center  pt-3  mb-2 " ><div class="col-12   text-center" ><img src="'+t.image+'"  class="img-fluid " ></div><div class="col-12"><div class="row justify-content-center  font25 mt-2"><i  style="cursor:pointer" class="fas fa-trash-alt his   white mr-5 mt-2  " data-id="'+t.tkn+'"  data="'+t.contentid+'" > </i><a href="icerikdetay/'+t.username+"/"+t.title+"/"+t.newsid+"/"+t.contentid+'"><span ><i class="fas fa-edit white"></i></span></a></div></div></div></div>').fadeIn(),CKEDITOR.instances.ckeditor1.setData("",function(){this.updateElement()}),$(".icrkph").css({display:"none"})):"success"==t.statu&&""!=t.contentid&&""!=t.image&&""!=t.username&&""!=t.newsid&&""!=t.title&&""!=t.tkn&&($(".iy").fadeOut(),$(".hib").fadeOut(),$(".hia").html(" "),$(".hrs").html(" "),$(".hss").html(" "),$(".hie").trigger("reset"),swal({title:"İçerik Eklendi",icon:"success",buttons:[!1,"Tamam"]}),$(".ghi").append('<div class="col-12   mb-4  " id="i'+t.contentid+'" ><div class="row  justify-content-center  pt-3  mb-2 " ><div class="col-12   text-center" ><img src="'+t.image+'"  class="img-fluid " ></div><div class="col-12"><div class="row justify-content-center  font25 mt-2"><i  style="cursor:pointer" class="fas fa-trash-alt his   white mr-5 mt-2  " data-id="'+t.tkn+'"  data="'+t.contentid+'" > </i><a href="icerikdetay/'+t.username+"/"+t.title+"/"+t.newsid+"/"+t.contentid+'"><span ><i class="fas fa-edit white"></i></span></a></div></div></div></div>').fadeIn(),CKEDITOR.instances.ckeditor1.setData("",function(){this.updateElement()}),$(".icrkph").css({display:"none"}))}})}})})});